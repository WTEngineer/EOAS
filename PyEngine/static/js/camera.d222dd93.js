(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["camera"],{"0393":function(t,e,n){"use strict";var i=n("5530"),s=(n("0481"),n("4069"),n("210b"),n("604c")),a=n("d9bd");e["a"]=s["a"].extend({name:"v-expansion-panels",provide:function(){return{expansionPanels:this}},props:{accordion:Boolean,disabled:Boolean,flat:Boolean,hover:Boolean,focusable:Boolean,inset:Boolean,popout:Boolean,readonly:Boolean,tile:Boolean},computed:{classes:function(){return Object(i["a"])(Object(i["a"])({},s["a"].options.computed.classes.call(this)),{},{"v-expansion-panels":!0,"v-expansion-panels--accordion":this.accordion,"v-expansion-panels--flat":this.flat,"v-expansion-panels--hover":this.hover,"v-expansion-panels--focusable":this.focusable,"v-expansion-panels--inset":this.inset,"v-expansion-panels--popout":this.popout,"v-expansion-panels--tile":this.tile})}},created:function(){this.$attrs.hasOwnProperty("expand")&&Object(a["a"])("expand","multiple",this),Array.isArray(this.value)&&this.value.length>0&&"boolean"===typeof this.value[0]&&Object(a["a"])(':value="[true, false, true]"',':value="[0, 2]"',this)},methods:{updateItem:function(t,e){var n=this.getValue(t,e),i=this.getValue(t,e+1);t.isActive=this.toggleMethod(n),t.nextIsActive=this.toggleMethod(i)}}})},"210b":function(t,e,n){},"3e72":function(t,e,n){"use strict";n("eff2")},"49e2":function(t,e,n){"use strict";var i=n("0789"),s=n("9d65"),a=n("a9ad"),o=n("3206"),r=n("80d2"),c=n("58df"),l=Object(c["a"])(s["a"],a["a"],Object(o["a"])("expansionPanel","v-expansion-panel-content","v-expansion-panel"));e["a"]=l.extend().extend({name:"v-expansion-panel-content",data:function(){return{isActive:!1}},computed:{parentIsActive:function(){return this.expansionPanel.isActive}},watch:{parentIsActive:{immediate:!0,handler:function(t,e){var n=this;t&&(this.isBooted=!0),null==e?this.isActive=t:this.$nextTick((function(){return n.isActive=t}))}}},created:function(){this.expansionPanel.registerContent(this)},beforeDestroy:function(){this.expansionPanel.unregisterContent()},render:function(t){var e=this;return t(i["a"],this.showLazyContent((function(){return[t("div",e.setBackgroundColor(e.color,{staticClass:"v-expansion-panel-content",directives:[{name:"show",value:e.isActive}]}),[t("div",{class:"v-expansion-panel-content__wrap"},Object(r["p"])(e))])]})))}})},"4ffd":function(t,e,n){t.exports=n.p+"img/logo.84ee0528.png"},"96a9":function(t,e,n){},"9f6c":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("1da1"),s=(n("96cf"),n("365c")),a="/notifications",o=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].get("".concat(a).concat(e||""));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},a55c:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.loading?i("div",{staticClass:"tw-flex tw-justify-center tw-items-center page-loading"},[i("v-progress-circular",{attrs:{indeterminate:"",color:"var(--cui-primary)"}})],1):i("div",{staticClass:"tw-py-6 tw-px-4"},[i("div",{staticClass:"tw-max-w-4xl pl-safe pr-safe"},[i("div",{staticClass:"tw-flex tw-flex-wrap"},[i("v-row",{staticClass:"tw-w-full tw-h-full"},[i("v-col",{staticClass:"tw-mb-3",attrs:{cols:t.cols}},[i("vue-aspect-ratio",{attrs:{ar:"16:9",width:"100%"}},[i("VideoCard",{ref:t.camera.name,attrs:{camera:t.camera,stream:"",noLink:"",hideNotifications:""}})],1)],1)],1)],1),i("v-col",{staticClass:"tw-flex tw-justify-between tw-items-center tw-mt-2",attrs:{cols:"12"}},[i("div",{staticClass:"tw-w-full tw-flex tw-justify-between tw-items-center"},[i("div",{staticClass:"tw-block"},[i("h2",{staticClass:"tw-leading-6"},[t._v(t._s(t.$route.params.name))]),i("span",{staticClass:"subtitle"},[t._v(t._s(t.camera.settings.room))])]),i("div",{staticClass:"tw-block"},[i("v-btn",{staticClass:"tw-text-white",attrs:{fab:"",small:"",color:"var(--cui-primary)"},on:{click:function(e){return t.$router.push("/cameras/"+t.camera.name+"/feed")}}},[i("v-icon",{attrs:{size:"20"}},[t._v(t._s(t.icons["mdiOpenInNew"]))])],1)],1)])]),i("v-col",{staticClass:"tw-px-0 tw-flex tw-justify-between tw-items-center tw-mt-2",attrs:{cols:t.cols}},[i("v-expansion-panels",{attrs:{multiple:""},model:{value:t.notificationsPanel,callback:function(e){t.notificationsPanel=e},expression:"notificationsPanel"}},t._l(1,(function(e,s){return i("v-expansion-panel",{key:s,staticClass:"notifications-panel"},[i("v-expansion-panel-header",{staticClass:"notifications-panel-title text-default tw-font-bold"},[t._v(t._s(t.$t("notifications")))]),i("v-expansion-panel-content",{staticClass:"notifications-panel-content"},[t.notifications.length?i("v-virtual-scroll",{staticStyle:{"border-bottom-right-radius":"10px","border-bottom-left-radius":"10px"},attrs:{items:t.notifications,"item-height":"74","max-height":"400",bench:"10"},scopedSlots:t._u([{key:"default",fn:function(e){e.item;return[i("v-list",{staticClass:"tw-p-0",attrs:{"two-line":"",dense:""}},t._l(t.notifications,(function(e,s){return i("v-list-item",{key:e.id,class:s!==t.notifications.length-1?"notification-item":""},[i("v-list-item-avatar",[i("v-avatar",{attrs:{size:"40",color:"black"}},[i("v-img",{attrs:{src:e.error?n("4ffd"):"/files/"+("Video"===e.recordType?e.name+"@2.jpeg":e.fileName),width:"56"},on:{error:function(t){e.error=!0}},scopedSlots:t._u([{key:"placeholder",fn:function(){return[i("div",{staticClass:"tw-flex tw-justify-center tw-items-center tw-h-full"},[i("v-progress-circular",{attrs:{indeterminate:"",color:"var(--cui-primary)",size:"16"}})],1)]},proxy:!0}],null,!0)})],1)],1),i("v-list-item-content",[i("v-list-item-title",{staticClass:"text-default tw-font-semibold"},[t._v(t._s(t.$t("movement_detected")+" ("+(e.label.includes("no label")?t.$t("no_label"):e.label.includes("Custom")?t.$t("custom"):e.label)+")"))]),i("v-list-item-subtitle",{staticClass:"text-muted"},[t._v(t._s(t.$t("time")+": "+e.time))])],1),i("v-list-item-action",[i("v-btn",{staticClass:"text-muted",attrs:{icon:""},on:{click:function(n){return t.openGallery(e)}}},[i("v-icon",[t._v(t._s(t.icons["mdiPlusCircle"]))])],1)],1)],1)})),1)]}}],null,!0)}):t._e(),t.notifications.length?t._e():i("div",{staticClass:"tw-flex tw-justify-center tw-items-center tw-w-full",staticStyle:{height:"100px"}},[i("v-list",{staticClass:"tw-p-0",attrs:{dense:""}},[i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",{staticClass:"text-muted tw-font-semibold tw-text-center"},[t._v(t._s(t.$t("no_notifications")))])],1)],1)],1)],1)],1)],1)})),1)],1)],1),i("LightBox",{ref:"lightbox",attrs:{media:t.images,showLightBox:!1,showThumbs:!1,showCaption:"",disableScroll:""}}),i("LightBox",{ref:"lightboxBanner",attrs:{media:t.notImages,showLightBox:!1,showThumbs:!1,showCaption:"",disableScroll:""}})],1)},s=[],a=n("5530"),o=n("1da1"),r=(n("96cf"),n("d3b7"),n("b0c0"),n("d81d"),n("99af"),n("c740"),n("9c77")),c=n.n(r),l=(n("2363"),n("94ed")),u=n("335a"),d=n("4add"),h=n("9f6c"),p=n("c413"),f=n("00c2"),m=function(t){return new Promise((function(e){return setTimeout(e,t)}))},v={name:"Camera",components:{LightBox:c.a,VideoCard:p["a"],"vue-aspect-ratio":u["a"]},mixins:[f["a"]],beforeRouteLeave:function(t,e,n){this.loading=!0,n()},data:function(){return{camera:{},cols:12,icons:{mdiOpenInNew:l["ub"],mdiPlusCircle:l["Bb"]},images:[],loading:!0,notifications:[],notificationsPanel:[0],showNotifications:!1}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d["b"])(t.$route.params.name);case 3:return n=e.sent,e.next=6,Object(d["c"])(t.$route.params.name);case 6:return i=e.sent,n.data.settings=i.data,e.next=10,Object(h["a"])("?cameras=".concat(n.data.name,"&pageSize=5"));case 10:return s=e.sent,t.notifications=s.data.result,t.images=s.data.result.map((function(t){if(t.recordStoring){var e={id:t.id,type:"image",caption:"".concat(t.camera," - ").concat(t.time),src:"/files/".concat(t.fileName),thumb:"/files/".concat(t.fileName)};return"Video"===t.recordType&&(delete e.src,e=Object(a["a"])(Object(a["a"])({},e),{},{type:"video",sources:[{src:"/files/".concat(t.fileName),type:"video/mp4"}],thumb:"/files/".concat(t.name,"@2.jpeg"),width:"100%",height:"auto",autoplay:!1})),e}})),t.camera=n.data,t.loading=!1,e.next=17,m(10);case 17:e.next=23;break;case 19:e.prev=19,e.t0=e["catch"](0),console.log(e.t0),t.$toast.error(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[0,19]])})))()},methods:{openGallery:function(t){if(t.recordStoring){var e=this.images.findIndex((function(e){return e.id===t.id}));this.$refs.lightbox.showImage(e)}},toggleNotificationsPanel:function(){this.showNotifications=!this.showNotifications,this.showNotifications?this.notificationsPanel=[0]:this.notificationsPanel=[]}}},x=v,b=(n("3e72"),n("2877")),g=n("6544"),w=n.n(g),C=n("8212"),y=n("8336"),_=n("62ad"),j=n("cd55"),O=n("49e2"),P=n("c865"),$=n("0393"),k=n("132d"),I=n("adda"),A=n("8860"),V=n("da13"),B=n("1800"),S=n("8270"),L=n("5d23"),R=n("490a"),T=n("0fd9"),H=(n("a9e3"),n("fb6a"),n("96a9"),n("24b2")),N=n("f977"),M=n("80d2"),D=H["a"].extend({name:"v-virtual-scroll",directives:{Scroll:N["b"]},props:{bench:{type:[Number,String],default:0},itemHeight:{type:[Number,String],required:!0},items:{type:Array,default:function(){return[]}}},data:function(){return{first:0,last:0,scrollTop:0}},computed:{__bench:function(){return parseInt(this.bench,10)},__itemHeight:function(){return parseInt(this.itemHeight,10)},firstToRender:function(){return Math.max(0,this.first-this.__bench)},lastToRender:function(){return Math.min(this.items.length,this.last+this.__bench)}},watch:{height:"onScroll",itemHeight:"onScroll"},mounted:function(){this.last=this.getLast(0)},methods:{getChildren:function(){return this.items.slice(this.firstToRender,this.lastToRender).map(this.genChild)},genChild:function(t,e){e+=this.firstToRender;var n=Object(M["g"])(e*this.__itemHeight);return this.$createElement("div",{staticClass:"v-virtual-scroll__item",style:{top:n},key:e},Object(M["p"])(this,"default",{index:e,item:t}))},getFirst:function(){return Math.floor(this.scrollTop/this.__itemHeight)},getLast:function(t){var e=parseInt(this.height||0,10)||this.$el.clientHeight;return t+Math.ceil(e/this.__itemHeight)},onScroll:function(){this.scrollTop=this.$el.scrollTop,this.first=this.getFirst(),this.last=this.getLast(this.first)}},render:function(t){var e=t("div",{staticClass:"v-virtual-scroll__container",style:{height:Object(M["g"])(this.items.length*this.__itemHeight)}},this.getChildren());return t("div",{staticClass:"v-virtual-scroll",style:this.measurableStyles,directives:[{name:"scroll",modifiers:{self:!0},value:this.onScroll}],on:this.$listeners},[e])}}),E=Object(b["a"])(x,i,s,!1,null,"ece61b16",null);e["default"]=E.exports;w()(E,{VAvatar:C["a"],VBtn:y["a"],VCol:_["a"],VExpansionPanel:j["a"],VExpansionPanelContent:O["a"],VExpansionPanelHeader:P["a"],VExpansionPanels:$["a"],VIcon:k["a"],VImg:I["a"],VList:A["a"],VListItem:V["a"],VListItemAction:B["a"],VListItemAvatar:S["a"],VListItemContent:L["a"],VListItemSubtitle:L["b"],VListItemTitle:L["c"],VProgressCircular:R["a"],VRow:T["a"],VVirtualScroll:D})},c865:function(t,e,n){"use strict";var i=n("5530"),s=n("0789"),a=n("9d26"),o=n("a9ad"),r=n("3206"),c=n("5607"),l=n("80d2"),u=n("58df"),d=Object(u["a"])(o["a"],Object(r["a"])("expansionPanel","v-expansion-panel-header","v-expansion-panel"));e["a"]=d.extend().extend({name:"v-expansion-panel-header",directives:{ripple:c["a"]},props:{disableIconRotate:Boolean,expandIcon:{type:String,default:"$expand"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1}},data:function(){return{hasMousedown:!1}},computed:{classes:function(){return{"v-expansion-panel-header--active":this.isActive,"v-expansion-panel-header--mousedown":this.hasMousedown}},isActive:function(){return this.expansionPanel.isActive},isDisabled:function(){return this.expansionPanel.isDisabled},isReadonly:function(){return this.expansionPanel.isReadonly}},created:function(){this.expansionPanel.registerHeader(this)},beforeDestroy:function(){this.expansionPanel.unregisterHeader()},methods:{onClick:function(t){this.$emit("click",t)},genIcon:function(){var t=Object(l["p"])(this,"actions")||[this.$createElement(a["a"],this.expandIcon)];return this.$createElement(s["d"],[this.$createElement("div",{staticClass:"v-expansion-panel-header__icon",class:{"v-expansion-panel-header__icon--disable-rotate":this.disableIconRotate},directives:[{name:"show",value:!this.isDisabled}]},t)])}},render:function(t){var e=this;return t("button",this.setBackgroundColor(this.color,{staticClass:"v-expansion-panel-header",class:this.classes,attrs:{tabindex:this.isDisabled?-1:null,type:"button","aria-expanded":this.isActive},directives:[{name:"ripple",value:this.ripple}],on:Object(i["a"])(Object(i["a"])({},this.$listeners),{},{click:this.onClick,mousedown:function(){return e.hasMousedown=!0},mouseup:function(){return e.hasMousedown=!1}})}),[Object(l["p"])(this,"default",{open:this.isActive},!0),this.hideActions||this.genIcon()])}})},cd55:function(t,e,n){"use strict";var i=n("5530"),s=n("4e82"),a=n("3206"),o=n("80d2"),r=n("58df");e["a"]=Object(r["a"])(Object(s["a"])("expansionPanels","v-expansion-panel","v-expansion-panels"),Object(a["b"])("expansionPanel",!0)).extend({name:"v-expansion-panel",props:{disabled:Boolean,readonly:Boolean},data:function(){return{content:null,header:null,nextIsActive:!1}},computed:{classes:function(){return Object(i["a"])({"v-expansion-panel--active":this.isActive,"v-expansion-panel--next-active":this.nextIsActive,"v-expansion-panel--disabled":this.isDisabled},this.groupClasses)},isDisabled:function(){return this.expansionPanels.disabled||this.disabled},isReadonly:function(){return this.expansionPanels.readonly||this.readonly}},methods:{registerContent:function(t){this.content=t},unregisterContent:function(){this.content=null},registerHeader:function(t){this.header=t,t.$on("click",this.onClick)},unregisterHeader:function(){this.header=null},onClick:function(t){t.detail&&this.header.$el.blur(),this.$emit("click",t),this.isReadonly||this.isDisabled||this.toggle()},toggle:function(){var t=this;this.$nextTick((function(){return t.$emit("change")}))}},render:function(t){return t("div",{staticClass:"v-expansion-panel",class:this.classes,attrs:{"aria-expanded":String(this.isActive)}},Object(o["p"])(this))}})},eff2:function(t,e,n){}}]);